(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["sub_pages/pages/identity_id_photo/identity_id_photo"],{61:function(e,n,t){"use strict";(function(e){t(5);o(t(4));var n=o(t(62));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},62:function(e,n,t){"use strict";t.r(n);var o=t(63),a=t(65);for(var c in a)"default"!==c&&function(e){t.d(n,e,(function(){return a[e]}))}(c);t(67);var i,r=t(11),s=Object(r["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,"4da68e5c",null,!1,o["components"],i);s.options.__file="sub_pages/pages/identity_id_photo/identity_id_photo.vue",n["default"]=s.exports},63:function(e,n,t){"use strict";t.r(n);var o=t(64);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},64:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return i})),t.d(n,"recyclableRender",(function(){return c})),t.d(n,"components",(function(){return o}));try{o={uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,140))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var e=this,n=e.$createElement;e._self._c},c=!1,i=[];a._withStripped=!0},65:function(e,n,t){"use strict";t.r(n);var o=t(66),a=t.n(o);for(var c in o)"default"!==c&&function(e){t.d(n,e,(function(){return o[e]}))}(c);n["default"]=a.a},66:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(t(18)),a=t(21);function c(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t,o,a,c,i){try{var r=e[c](i),s=r.value}catch(u){return void t(u)}r.done?n(s):Promise.resolve(s).then(o,a)}function r(e){return function(){var n=this,t=arguments;return new Promise((function(o,a){var c=e.apply(n,t);function r(e){i(c,o,a,r,s,"next",e)}function s(e){i(c,o,a,r,s,"throw",e)}r(void 0)}))}}var s={data:function(){return{firstUpLoad:!0,tempFilePathFace:"",tempFilePathNational:"",idInfo:{userNo:"",idName:"",idNumber:"",backFlag:!1,faceFlag:!1}}},onLoad:function(e){this.idInfo.userNo=e.userNo,e.userName&&(this.idInfo.idName=e.userName,this.idInfo.idNumber=e.credNo,this.firstUpLoad=!1),console.log(e)},methods:{upLoadImg:function(n){var t=this;return r(o.default.mark((function c(){var i;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(2!=n||""!=t.idInfo.idNumber){o.next=4;break}e.showModal({title:"请先上传人像面",content:"",showCancel:!0,success:function(e){e.confirm,e.cancel}}),o.next=9;break;case 4:return o.next=6,(0,a.upLoadPic)();case 6:i=o.sent,1==n?t.tempFilePathFace=i.tempFilePaths[0]:2==n&&(t.tempFilePathNational=i.tempFilePaths[0]),e.uploadFile({url:"https://pass.jysc.sh.cn/App/OCR",filePath:1==n?t.tempFilePathFace:t.tempFilePathNational,name:1==n?"back":"front"+t.idInfo.idNumber,success:function(o){var a=o.statusCode,c=o.data;try{if(200==a){var i=JSON.parse(c);if(console.log(i),0!=i.Code){switch(n){case 1:t.tempFilePathFace="";break;case 2:t.tempFilePathNational="";break}e.showModal({title:"Fail:"+i.Code,content:i.Message,showCancel:!0,success:function(e){e.confirm,e.cancel}})}else 1==n?(t.idInfo.idName=i.Data.name,t.idInfo.idNumber=i.Data.credNo,t.idInfo.faceFlag=!0,console.log(t.idInfo)):2==n&&(t.idInfo.backFlag=!0)}else{switch(n){case 1:t.tempFilePathFace="";break;case 2:t.tempFilePathNational="";break}e.showModal({title:"Fail",content:"网络异常",showCancel:!0,success:function(e){e.confirm,e.cancel}})}}catch(r){console.log("出错了"),e.showModal({title:"出错了",content:r,showCancel:!0,success:function(e){e.confirm,e.cancel}})}},fail:function(e){console.log(e)}});case 9:case"end":return o.stop()}}),c)})))()},onSubmit:function(){var n=this;return r(o.default.mark((function t(){var c,i;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(n.idInfo),!n.idInfo.faceFlag||!n.idInfo.backFlag){t.next=10;break}return t.next=4,(0,a.saveRealName)(n.idInfo.userNo,n.idInfo.idNumber,n.idInfo.idName);case 4:c=t.sent,i=c.data,console.log(i),0==i.Code?e.showModal({title:"成功",content:i.Message,showCancel:!0,success:function(e){e.confirm,e.cancel}}):e.showModal({title:"Fail",content:i.Message,showCancel:!0,success:function(e){e.confirm,e.cancel}}),t.next=11;break;case 10:e.showModal({title:"上传失败",content:"请上传所有图片",showCancel:!0,success:function(e){e.confirm,e.cancel}});case 11:case"end":return t.stop()}}),t)})))()}}};n.default=s}).call(this,t(1)["default"])},67:function(e,n,t){"use strict";t.r(n);var o=t(68),a=t.n(o);for(var c in o)"default"!==c&&function(e){t.d(n,e,(function(){return o[e]}))}(c);n["default"]=a.a},68:function(e,n,t){}},[[61,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/sub_pages/pages/identity_id_photo/identity_id_photo.js.map