{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderProjects/jy_approach_forecast/sub_pages/pages/identity_id_num/identity_id_num.vue?94d3","webpack:///D:/HBuilderProjects/jy_approach_forecast/sub_pages/pages/identity_id_num/identity_id_num.vue?b118","webpack:///D:/HBuilderProjects/jy_approach_forecast/sub_pages/pages/identity_id_num/identity_id_num.vue?b4cf","webpack:///D:/HBuilderProjects/jy_approach_forecast/sub_pages/pages/identity_id_num/identity_id_num.vue?ad0f","uni-app:///sub_pages/pages/identity_id_num/identity_id_num.vue","webpack:///D:/HBuilderProjects/jy_approach_forecast/sub_pages/pages/identity_id_num/identity_id_num.vue?2a8d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniSection","uniForms","uniFormsItem","uniEasyinput","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","content","codeUrl","QRwidth","QRheight","timeNow","timer","pageStatus","userAgreement","agreement","text","value","arrlength","openid","idInfo","idName","idNumber","phone","code","codeBtn","isDisabled","infoRules","rules","required","errorMessage","minLength","maxLength","pattern","created","destroyed","clearInterval","methods","getOpenid","uni","title","mask","provider","success","res","key","fail","qrFun","uQRCode","canvasId","componentInstance","size","margin","backgroundColor","foregroundColor","fileType","errorCorrectLevel","getCouponDate","timefunc","showPrivary","url","tempFilePath","statusCode","filePath","changeAgreement","onSubmit","showCancel","confirm","cancel","getCode","icon","duration","getTime"],"mappings":"yKAAA,MAGA,aACA,WAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,+ECLX,iIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sDACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,WAAY,WACV,OAAO,0FAITC,SAAU,WACR,OAAO,wHAITC,aAAc,WACZ,OAAO,8FAITC,aAAc,WACZ,OAAO,iGAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,gCChDvB,wHAA2oB,eAAG,G,oJCiE9oB,QAOA,W,EACA,CACAC,gBACA,OAEAC,WAIAC,WACAC,6CACAC,8CAEAC,0DAEAC,SAEAC,kBAEAC,kBAEAC,YACAC,8BACAC,UAGAC,YAEAC,sCACAC,QACAC,UAEAC,YACAC,SAEAC,SAGAC,gBAEAC,cACAC,WAmBAN,QACAO,QACAC,YACAC,wBAGAP,OACAK,QACAC,YACAC,uBAEA,CACAC,aACAC,aACAF,qCAEA,CAEAG,0CACAH,0BAMAN,MACAI,QACAC,YACAC,sBAEA,CACAC,YACAC,YACAF,0CAOAI,mBACA,kBAEA,iBAEA,qBAEA,iBAGAC,qBACAC,0BACA1C,sBAEA2C,SAEAC,qBAAA,WACAC,eACAC,YACAC,UAGAF,SACAG,kBACAC,mBAAA,iJACA,kCAAAC,SACAlD,eACA,iBACA,4BACA6C,cACAM,aACAvC,wBACAqC,oBACAjD,gBAEAoD,sBAYAP,gBAAA,2CACA,sDAxBAI,GAyBAG,iBACApD,eACA6C,oBAMAQ,iBACAC,gBACAC,kBACAC,uBACAlC,kBACAmC,kBACAC,SACAC,0BACAC,0BACAC,eACAC,gDACAb,yBAKAc,yBAAA,4IAIA,OAHAlB,eACAC,gBACAC,UACA,UAGA,sCADAG,SAEAlD,eAEAA,qCAEA,yBACA,sBACA,eACA,iCACA,kCAGA,kBACA,eACA,iCACA,oBAGA,WAEA,eAEA6C,gBAEA7C,0BAAA,2CA/BA,IAkCAgE,oBAAA,WACA,8GAMAC,uBACApB,eACAC,YACAC,UAEAF,gBACAqB,yDACAjB,oBAGA,IAFAkB,iBACAC,aAGAvB,gBACAwB,WACApB,oBACAJ,iBAEAO,iBACAP,oBAIAO,iBACAP,gBACAA,aACAC,aACAjC,gBAMAyD,4BACAtE,eACAA,kCACA,qCAGAuE,oBAAA,uIAEA,+BAIA,OAHA1B,aACAC,eACAjC,aACA,mBACA,UAGA,8KAEA,OADAb,yBACA,UACA,mBACA,eACA,gBACA,GACA,SACA,eACA,OANAY,SAOAZ,eACA,oBACA6C,aACAC,qBACAjC,WACA2D,cACAvB,oBACAwB,UACAC,SAEA,iBAEA7B,cAAAqB,4DAIA,kBACA,mBACA,qBACA,kBAGArB,aACAC,0BACAjC,WACA2D,gBAEA,2CACA,mDAtCA,IAsCA,mBACAxE,4BAEA,0CAnDA,IAsDA2E,mBAAA,gJACA,GAAA9B,iBACA,uEAKA,OAJAA,aACAC,gBACA8B,aACAC,eACA,mBACA,UAkBA,OAdAC,KACA,gBAEA5D,0BACA,KACA4D,IACA,kCAEA,kBACA,gBACApC,kBAEA1C,sBACA,KACA,UAGA,iDADAkD,SAEAlD,eAEA6C,aACAC,gBACA8B,YACAC,eACA,2CApCA,MAuCA,c,4DCjaA,wHAA0tC,eAAG,G","file":"sub_pages/pages/identity_id_num/identity_id_num.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './sub_pages/pages/identity_id_num/identity_id_num.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./identity_id_num.vue?vue&type=template&id=a1ad43f8&scoped=true&\"\nvar renderjs\nimport script from \"./identity_id_num.vue?vue&type=script&lang=js&\"\nexport * from \"./identity_id_num.vue?vue&type=script&lang=js&\"\nimport style0 from \"./identity_id_num.vue?vue&type=style&index=0&id=a1ad43f8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a1ad43f8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"sub_pages/pages/identity_id_num/identity_id_num.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity_id_num.vue?vue&type=template&id=a1ad43f8&scoped=true&\"","var components\ntry {\n  components = {\n    uniSection: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-section/components/uni-section/uni-section\" */ \"@/uni_modules/uni-section/components/uni-section/uni-section.vue\"\n      )\n    },\n    uniForms: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity_id_num.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity_id_num.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view v-if=\"pageStatus === 0\" class=\"container\">\r\n\t\t<uni-section title=\"优惠券领取\" type=\"line\">\r\n\t\t</uni-section>\r\n\t\t<uni-forms ref=\"idInfoForm\" :rules=\"infoRules\" :modelValue=\"idInfo\">\r\n\t\t\t<!-- 姓名 -->\r\n\t\t\t<uni-forms-item required label=\"姓名\" name=\"idName\" :labelWidth=\"75\">\r\n\t\t\t\t<view class=\"plateNum\">\r\n\t\t\t\t\t<uni-easyinput v-model=\"idInfo.idName\" placeholder=\"请输入姓名\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 身份证号 -->\r\n\t\t\t<!-- \t\t\t<uni-forms-item required label=\"身份证号\" name=\"idNumber\" :labelWidth=\"75\">\r\n\t\t\t\t<view class=\"plateNum\">\r\n\t\t\t\t\t<uni-easyinput v-model=\"idInfo.idNumber\" placeholder=\"请输入身份证号\" maxlength=\"18\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item> -->\r\n\t\t\t<!-- 手机号 -->\r\n\t\t\t<uni-forms-item required label=\"手机号\" name=\"phone\" :labelWidth=\"75\">\r\n\t\t\t\t<view class=\"plateNum\">\r\n\t\t\t\t\t<uni-easyinput v-model=\"idInfo.phone\" placeholder=\"请输入手机号\" maxlength=\"11\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 验证码 -->\r\n\t\t\t<uni-forms-item required label=\"验证码\" name=\"code\" :labelWidth=\"75\">\r\n\t\t\t\t<view class=\"plateNum code\">\r\n\t\t\t\t\t<view style=\"flex: 6\">\r\n\t\t\t\t\t\t<uni-easyinput v-model=\"idInfo.code\" placeholder=\"输入验证码\" maxlength=\"11\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button class=\"btn\" hover-class=\"btn_press_1\" @click=\"getCode\" :disabled=\"isDisabled\">\r\n\t\t\t\t\t\t{{ codeBtn }}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<!-- 用户隐私协议 -->\r\n\t\t\t<!-- \t\t\t<view class=\"input\" style=\"display: flex;justify-content: center;flex-direction: column;align-items: center;\">\r\n\t\t\t\t<uni-data-checkbox multiple v-model=\"userAgreement\" :localdata=\"agreement\"\r\n\t\t\t\t\t@change=\"changeAgreement\"></uni-data-checkbox>\r\n\t\t\t\t<view @click=\"showPrivary\" style=\"color:#e749b8\">查看协议内容</view>\r\n\t\t\t</view> -->\r\n\r\n\t\t\t<button @click=\"onSubmit\">提交</button>\r\n\t\t</uni-forms>\r\n\t</view>\r\n\t<!-- \r\n\t\t实时时间\r\n\t\t二维码\r\n\t\t手机号后四位(未使用优惠券) || 已领取优惠券(已使用优惠券)\r\n\t -->\r\n\t<view v-else-if=\"pageStatus\" style=\"margin-top: 5vh;\">\r\n\t\t<!-- 时间 -->\r\n\t\t<view class=\"title\">{{ timeNow }}</view>\r\n\t\t<!-- 二维码 -->\r\n\t\t<view class=\"canvas-code\">\r\n\t\t\t<view class=\"canvas-inside\">\r\n\t\t\t\t<canvas canvas-id=\"qrcode\" :style=\"'width:' + QRwidth + 'px;height:' + QRwidth + 'px'\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"title\" v-if=\"content == '已领取优惠券'\"><text style=\"color: red;\">{{ content }}</text></view>\r\n\t\t<view class=\"title\" v-else>手机尾号:<text style=\"color: red;\">{{ content }}</text></view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetUserOpenid,\r\n\t\tcodeMessage,\r\n\t\teventRegister,\r\n\t\tqrCode,\r\n\t\tget_date\r\n\t} from 'api/index.js';\r\n\timport uQRCode from 'untils/weapp-qrcode.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 描述相关\r\n\t\t\t\tcontent: '',\r\n\t\t\t\t/* \r\n\t\t\t\t\t二维码相关\r\n\t\t\t\t*/\r\n\t\t\t\tcodeUrl: '',\r\n\t\t\t\tQRwidth: uni.getSystemInfoSync().windowWidth * 0.6,\r\n\t\t\t\tQRheight: uni.getSystemInfoSync().windowWidth * 0.6,\r\n\t\t\t\t// 页面实时时间\r\n\t\t\t\ttimeNow: get_date(Date.parse(new Date()), '-').datetime,\r\n\t\t\t\t// 定时器\r\n\t\t\t\ttimer: '',\r\n\t\t\t\t// 页面状态\r\n\t\t\t\tpageStatus: Number,\r\n\t\t\t\t// 用户隐私协议\r\n\t\t\t\tuserAgreement: [0],\r\n\t\t\t\t// 协议\r\n\t\t\t\tagreement: [{\r\n\t\t\t\t\ttext: '我已同意并接受《用户服务协议》及《隐私政策》',\r\n\t\t\t\t\tvalue: 0\r\n\t\t\t\t}],\r\n\t\t\t\t// 协议数组长度\r\n\t\t\t\tarrlength: 1,\r\n\r\n\t\t\t\topenid: uni.getStorageSync('openid') || '',\r\n\t\t\t\tidInfo: {\r\n\t\t\t\t\tidName: '',\r\n\t\t\t\t\t// 身份证号\r\n\t\t\t\t\tidNumber: '',\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\t// 验证码\r\n\t\t\t\t\tcode: '',\r\n\t\t\t\t},\r\n\t\t\t\t// 验证码按钮\r\n\t\t\t\tcodeBtn: '获取验证码',\r\n\t\t\t\t//\r\n\t\t\t\tisDisabled: false,\r\n\t\t\t\tinfoRules: {\r\n\t\t\t\t\t/* \r\n\t\t\t\t\t\t身份证\r\n\t\t\t\t\tidNumber: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: '请输入身份证号'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tminLength: 18,\r\n\t\t\t\t\t\t\tmaxLength: 18,\r\n\t\t\t\t\t\t\terrorMessage: '身份证号长度位{maxLength}个字符',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpattern: `^([1-6][1-9]|50)\\\\d{4}(18|19|20)\\\\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\\\\d{3}[0-9Xx]$`,\r\n\t\t\t\t\t\t\terrorMessage: '身份证格式错误'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}, */\r\n\t\t\t\t\tidName: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: '请输入姓名'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tphone: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入手机号'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tminLength: 11,\r\n\t\t\t\t\t\t\t\tmaxLength: 11,\r\n\t\t\t\t\t\t\t\terrorMessage: '手机号长度为{maxLength}个字符',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t// pattern: `^1[34578]\\\\d{9}$`,\r\n\t\t\t\t\t\t\t\tpattern: `^0?(13|14|15|17|18|19)[0-9]{9}$`,\r\n\t\t\t\t\t\t\t\terrorMessage: '手机号格式错误'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t// 验证码\r\n\t\t\t\t\tcode: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '输入验证码',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tminLength: 6,\r\n\t\t\t\t\t\t\t\tmaxLength: 6,\r\n\t\t\t\t\t\t\t\terrorMessage: '验证码长度为{maxLength}个字符',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (this.openid === '') {\r\n\t\t\t\t// 获取openid\r\n\t\t\t\tthis.getOpenid()\r\n\t\t\t}\r\n\t\t\tthis.getCouponDate();\r\n\t\t\t// 定时器\r\n\t\t\tthis.timefunc()\r\n\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tclearInterval(this.timer);\r\n\t\t\tconsole.log('销毁计时器');\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取openid\r\n\t\t\tgetOpenid() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\t// 登录微信获取openid\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: async loginResult => {\r\n\t\t\t\t\t\tconst res = await getUserOpenid(loginResult.code);\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif (res.data.Code == 0) {\r\n\t\t\t\t\t\t\tthis.openid = res.data.Data.openid\r\n\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\tkey: 'openid',\r\n\t\t\t\t\t\t\t\tdata: res.data.Data.openid,\r\n\t\t\t\t\t\t\t\tsuccess: (result) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(result);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: (error) => {}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/* \r\n\t\t\t\t\t\t\t获取失败不提示,因为openid此页面没什么用\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t/* else {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: 'Fail',\r\n\t\t\t\t\t\t\t\tcontent: res.data.Message,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} */\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//**生成二维码**//\r\n\t\t\tqrFun: function() {\r\n\t\t\t\tuQRCode.make({\r\n\t\t\t\t\tcanvasId: 'qrcode',\r\n\t\t\t\t\tcomponentInstance: this,\r\n\t\t\t\t\ttext: this.codeUrl,\r\n\t\t\t\t\tsize: this.QRwidth,\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\tbackgroundColor: '#ffffff',\r\n\t\t\t\t\tforegroundColor: '#000000',\r\n\t\t\t\t\tfileType: 'jpg',\r\n\t\t\t\t\terrorCorrectLevel: uQRCode.errorCorrectLevel.H,\r\n\t\t\t\t\tsuccess: res => {}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 使用优惠券时间\r\n\t\t\tasync getCouponDate() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '获取优惠券信息',\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata: res\r\n\t\t\t\t} = await qrCode(this.openid);\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\t// 未使用, 使用优惠券时间为空\r\n\t\t\t\tconsole.log(Object.hasOwn(res, \"data\"));\r\n\t\t\t\t// 是否含有data属性\r\n\t\t\t\tif (Object.hasOwn(res, \"data\")) {\r\n\t\t\t\t\tif (res.data.get_date === \"\") {\r\n\t\t\t\t\t\tthis.pageStatus = 1;\r\n\t\t\t\t\t\tthis.codeUrl = res.data.phone.slice(-4)\r\n\t\t\t\t\t\tthis.content = res.data.phone.slice(-4)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 已使用, 返回使用优惠券的时间\r\n\t\t\t\t\telse if (res.data.get_date) {\r\n\t\t\t\t\t\tthis.pageStatus = 2\r\n\t\t\t\t\t\tthis.codeUrl = res.data.phone.slice(-4)\r\n\t\t\t\t\t\tthis.content = '已领取优惠券'\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 生成二维码\r\n\t\t\t\t\tthis.qrFun()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.pageStatus = 0;\r\n\t\t\t\t}\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\t//  console.log(get_date(Date.parse(new Date()),'-'));\r\n\t\t\t\tconsole.log(this.pageStatus);\r\n\t\t\t},\r\n\t\t\t// 创建定时器\r\n\t\t\ttimefunc() {\r\n\t\t\t\tthis.timer = setInterval(() => this.timeNow = get_date(Date.parse(new Date()), '-').datetime, 1000)\r\n\t\t\t},\r\n\t\t\t/* \t\tstopTime(){\r\n\t\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\t}, */\r\n\t\t\t// 隐私协议\r\n\t\t\tshowPrivary() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\turl: 'https://pass.jysc.sh.cn/AppFiles/005newPrivacy.pdf',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\ttempFilePath,\r\n\t\t\t\t\t\tstatusCode\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t// console.log(tempFilePath);\r\n\t\t\t\t\t\tuni.openDocument({\r\n\t\t\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: (result) => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: 'fail',\r\n\t\t\t\t\t\t\tcontent: error,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 隐私协议勾选\r\n\t\t\tchangeAgreement(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tconsole.log(e.detail.data.length);\r\n\t\t\t\tthis.arrlength = e.detail.data.length\r\n\t\t\t},\r\n\r\n\t\t\tasync onSubmit() {\r\n\r\n\t\t\t\tif (this.arrlength == 0) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '请先勾选协议',\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$refs.idInfoForm.validate().then(async res => {\r\n\t\t\t\t\tconsole.log('表单数据信息：', res);\r\n\t\t\t\t\t// res.idName res.idNumber\r\n\t\t\t\t\tconst data = await eventRegister(\r\n\t\t\t\t\t\tthis.idInfo.phone,\r\n\t\t\t\t\t\tthis.idInfo.idName,\r\n\t\t\t\t\t\t'',\r\n\t\t\t\t\t\tthis.openid,\r\n\t\t\t\t\t\tthis.idInfo.code,\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tif (data.statusCode === 200) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: data.data.message,\r\n\t\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\t\tshowCancel: true,\r\n\t\t\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\t\t\tconfirm,\r\n\t\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t\t\tif(data.data.code === 0){\r\n\t\t\t\t\t\t\t\t\t// 刷新当前页面\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({ url: '/sub_pages/pages/identity_id_num/identity_id_num' })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.idInfo.phone = '';\r\n\t\t\t\t\t\tthis.idInfo.idName = '';\r\n\t\t\t\t\t\tthis.idInfo.idNumber = '';\r\n\t\t\t\t\t\tthis.idInfo.code = '';\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '网络异常' + data.statusCode,\r\n\t\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\t\tshowCancel: true,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.log('表单错误信息：', err);\r\n\t\t\t\t})\r\n\t\t\t\t// console.log(this.idInfo);\r\n\t\t\t},\r\n\t\t\t// 获取验证码\r\n\t\t\tasync getCode() {\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\tif (!(/^0?(13|14|15|17|18|19)[0-9]{9}$/.test(this.idInfo.phone))) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '手机号格式错误',\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 验证码倒计时事件\r\n\t\t\t\tlet getTime = 60;\r\n\t\t\t\tthis.isDisabled = true;\r\n\r\n\t\t\t\tvar timer = setInterval(() => {\r\n\t\t\t\t\tif (getTime > 0) {\r\n\t\t\t\t\t\tgetTime--;\r\n\t\t\t\t\t\tthis.codeBtn = `重新获取(${getTime})`;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.codeBtn = '获取验证码'\r\n\t\t\t\t\t\tthis.isDisabled = false\r\n\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('正在计时');\r\n\t\t\t\t}, 1000);\r\n\t\t\t\t// todo 验证码接口\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata: res\r\n\t\t\t\t} = await codeMessage(this.idInfo.phone)\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\t// const res = '验证码已发送';\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.container {\r\n\t\tpadding: 0 20px;\r\n\r\n\t\t.plateNum {\r\n\t\t\tflex: 7;\r\n\t\t\tmargin: 5px;\r\n\t\t}\r\n\r\n\t\t.code {\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\tflex: 3;\r\n\t\t\theight: 35px;\r\n\t\t\tpadding: 0 2px;\r\n\t\t\tfont-size: 14px;\r\n\t\t\tmargin: 2px;\r\n\t\t\tbackground-color: #79c667;\r\n\t\t\tcolor: white;\r\n\t\t}\r\n\r\n\t\t.btn_press_1 {\r\n\t\t\tbackground-color: #90bd86;\r\n\t\t\tcolor: gray;\r\n\t\t}\r\n\t}\r\n\r\n\t.title {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 8vw;\r\n\t}\r\n\r\n\t.canvas-code {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\t/* z-index: 2; */\r\n\t\t/* background-color: pink; */\r\n\r\n\t\theight: 0;\r\n\t\tpadding: 50% 0;\r\n\r\n\t\t/* border: 1px solid #0077ec; */\r\n\t\t.canvas-inside {\r\n\t\t\tposition: absolute;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tz-index: 10;\r\n\t\t\twidth: 80%;\r\n\t\t\theight: 80%;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\t/* 简洁的四角边框实现 */\r\n\t\t\tborder-image-source: radial-gradient(65% 65%, transparent 0px, transparent 70%, #f15c48);\r\n\t\t\tborder-image-slice: 3;\r\n\t\t\tborder-width: 10px;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-image-outset: 0cm;\r\n\t\t\t/*  */\r\n\t\t\t// border-radius: 10px;\r\n\t\t\tbox-shadow:\r\n\t\t\t\t7.5px 7.5px 16.9px -4px rgba(0, 0, 0, 0.06),\r\n\t\t\t\t60px 60px 135px -4px rgba(0, 0, 0, 0.12);\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity_id_num.vue?vue&type=style&index=0&id=a1ad43f8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identity_id_num.vue?vue&type=style&index=0&id=a1ad43f8&lang=scss&scoped=true&\""],"sourceRoot":""}